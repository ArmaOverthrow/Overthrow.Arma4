# Arma Reforger MCP Server

A Model Context Protocol (MCP) server that provides access to Arma Reforger class information and methods. This server allows AI assistants to search and retrieve detailed information about Arma Reforger's scripting classes.

## Features

- **Class Search**: Find Arma Reforger classes by name with fuzzy matching
- **Detailed Class Info**: Get comprehensive information about specific classes including their public methods
- **Database Statistics**: View stats about the class database and processing progress
- **Resource Access**: Access class information through MCP resources

## Available Tools

### `search_reforger_classes(query: str)`
Search for class names that match the given query (case-insensitive).
- **Args**: `query` - Search term to match against class names
- **Returns**: List of matching class names (limited to 50 results)

### `get_reforger_class(classname: str)`
Get detailed information about a specific class.
- **Args**: `classname` - Exact name of the class to retrieve
- **Returns**: Dictionary with class info including public methods

### `get_reforger_stats()`
Get statistics about the class database.
- **Returns**: Stats including total classes, processed classes, method counts, etc.

## Prerequisites

- Python 3.8+
- [uv](https://docs.astral.sh/uv/) package manager
- WSL/Ubuntu environment (recommended)

## Installation

### WSL/Ubuntu Setup

From the repository root directory:

1. **Install uv package manager:**
   ```bash
   curl -LsSf https://astral.sh/uv/install.sh | sh
   ```

2. **Navigate to the MCP server directory:**
   ```bash
   cd .scripts/reforger-mcp
   ```

3. **Set up the Python environment:**
   ```bash
   uv sync
   ```

4. **Return to repo root and generate class data:**
   ```bash
   cd ../..
   .scripts/get_reforger_classes.py
   ```

   This script will scrape and generate the `reforger_classes.json` file that the MCP server uses.

## Configuration

### For Claude Code

Claude Code will automatically detect the `.mcp.json` configuration file in the repository root and ask for user approval when loaded.

### For Cursor

Copy the JSON configuration from the `.mcp.json` file into your Cursor MCP settings:

1. Open Cursor settings
2. Navigate to MCP configuration
3. Add the server configuration from `.mcp.json`

## Usage Examples

Once configured, you can use the MCP server through your AI assistant:

```
# Search for classes related to vehicles
search_reforger_classes("Vehicle")

# Get detailed info about a specific class
get_reforger_class("SCR_BaseGameMode")

# View database statistics
get_reforger_stats()
```

## Data Source

The server reads from `reforger_classes.json`, which contains:
- Class names and their processing status
- Public methods for each class
- Metadata about class information completeness

This data is generated by the `get_reforger_classes.py` script, which scrapes class information from Arma Reforger's pydoc documentation.

## Development

### Running the Server Directly

```bash
cd .scripts/reforger-mcp
uv run server.py
```

### Project Structure

```
.scripts/reforger-mcp/
├── server.py              # Main MCP server implementation
├── pyproject.toml         # uv project configuration
├── README.md             # This file
└── reforger_classes.json # Generated class data (after running setup)
```

## Troubleshooting

### "Class data file not found" Error
- Ensure you've run `.scripts/get_reforger_classes.py` from the repo root
- Check that `reforger_classes.json` exists in your project root

### Import Errors
- Make sure you've run `uv sync` to install dependencies
- Verify you're using the correct Python environment

### No Classes Found
- The class database may need updating
- Re-run the class generation script: `.scripts/get_reforger_classes.py`

## Contributing

When adding new features:
1. Update the tool functions in `server.py`
2. Test with both Claude Code and Cursor
3. Update this README with new functionality
4. Ensure the MCP configuration files are updated accordingly

## License

This MCP server is part of the Overthrow Arma 4 project and follows the same licensing terms.
